(()=>{"use strict";function t(t){const{form:o,input:e,list:i}=t,s="name";this.init=function(){this.loadTodo(),$(o).on("submit",(t=>{t.preventDefault();const o=$(e).val().trim();this.saveTodo({id:Math.floor(100*Math.random()),name:o,checkBox:!1})}))},this.saveTodo=function(t){const e=JSON.parse(localStorage.getItem(s))||[];$(o)[0].reset(),this.TodolistTemplate(t),localStorage.setItem(s,JSON.stringify([...e,t]))},this.TodolistTemplate=function(t){$(i).append(`<li class="todo-item" data-id="${t.id}"><input class='checkboxStatus' type="checkbox" ${t.checked?"checked":""}><span class="todo-item__description">${t.name}</span><button class="todo-item__delete">Видалити</button><button class="todo-item__showModal">Відкрити завдання</button></li>`);const o=$(`[data-id="${t.id}"]`);$(o).children("span").text(),o.find(".todo-item__delete").on("click",this.deleteElement.bind(this)),o.find("input[type='checkbox']").on("click",this.toggleCheckbox.bind(this)),o.find(".todo-item__showModal").on("click",this.showModal.bind(this,t.name)),this.hideModal()},this.deleteElement=function(t){const o=$(t.target).closest("li"),e=o.data("id"),i=JSON.parse(localStorage.getItem(s));localStorage.setItem(s,JSON.stringify(i.filter((t=>t.id!==Number(e))))),o.remove()},this.loadTodo=function(){const t=JSON.parse(localStorage.getItem(s));t&&t.forEach((t=>{this.TodolistTemplate(t);const o=$(`[data-id="${t.id}"]`);o.find("input[type='checkbox']").prop("checked",t.checkBox),t.checkBox&&o.addClass("todo-item--checked")}))},this.toggleCheckbox=function(t){const o=JSON.parse(localStorage.getItem(s)),e=$(t.target).closest("li"),i=e.data("id"),c=$(t.target).prop("checked"),n=o.map((t=>(t.id===Number(i)&&(t.checkBox=c),t)));localStorage.setItem(s,JSON.stringify(n)),c?e.addClass("todo-item--checked"):e.removeClass("todo-item--checked")},this.showModal=function(t){$(".modal-content-text").text(t),$(".modal").css("display","block")},this.hideModal=function(){$(".btn-secondary").click((function(){$(".modal").css("display","none")}))}}$((function(){new t({form:$(".js--form"),input:$(".js--form__input"),addButton:$(".form__btn"),list:$(".js--todos-wrapper")}).init()}))})();